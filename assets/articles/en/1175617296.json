{"url": "https://api.github.com/repos/kemu3007/portal/issues/22", "repository_url": "https://api.github.com/repos/kemu3007/portal", "labels_url": "https://api.github.com/repos/kemu3007/portal/issues/22/labels{/name}", "comments_url": "https://api.github.com/repos/kemu3007/portal/issues/22/comments", "events_url": "https://api.github.com/repos/kemu3007/portal/issues/22/events", "html_url": "https://github.com/kemu3007/portal/issues/22", "id": 1175617296, "node_id": "I_kwDOG7qoq85GEn8Q", "number": 22, "title": "AWS APEX DOMAIN", "user": {"login": "kemu3007", "id": 29157528, "node_id": "MDQ6VXNlcjI5MTU3NTI4", "avatar_url": "https://avatars.githubusercontent.com/u/29157528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kemu3007", "html_url": "https://github.com/kemu3007", "followers_url": "https://api.github.com/users/kemu3007/followers", "following_url": "https://api.github.com/users/kemu3007/following{/other_user}", "gists_url": "https://api.github.com/users/kemu3007/gists{/gist_id}", "starred_url": "https://api.github.com/users/kemu3007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kemu3007/subscriptions", "organizations_url": "https://api.github.com/users/kemu3007/orgs", "repos_url": "https://api.github.com/users/kemu3007/repos", "events_url": "https://api.github.com/users/kemu3007/events{/privacy}", "received_events_url": "https://api.github.com/users/kemu3007/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3898939400, "node_id": "LA_kwDOG7qoq87oZRgI", "url": "https://api.github.com/repos/kemu3007/portal/labels/article", "name": "article", "color": "C200E5", "default": false, "description": ""}, {"id": 3951278401, "node_id": "LA_kwDOG7qoq87rg7lB", "url": "https://api.github.com/repos/kemu3007/portal/labels/AWS", "name": "AWS", "color": "EE0471", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-21T16:14:23Z", "updated_at": "2022-03-21T16:34:46Z", "closed_at": null, "author_association": "OWNER", "active_lock_reason": null, "body": "If the site is placed on AWS, it is a common configuration, such as placing an SSL certificate on the load balancer and specifying EC2 in the target group.\r\n\r\nIn the case of this configuration, a normal CNAME record is added to the DNS record of the domain, and the DNS name of the load balancer is described.\r\n\r\n<Img Width = \"644\" Alt = \"Screenshot 2022-03-22 0 46 54\" SRC = \"https://user- Images.githubuserContent.com png \">\r\n\r\nHowever, if you want to set a load balancer for APEX DOMAIN (this site `kemu.site`), you cannot add a CNAME record.\r\n\r\nRoad balancer IPs are variable, acts that may be changed due to restarts, etc. are not recommended, and there are ways to fix the IP of road balancers, but it is expensive.\r\n\r\n> [AWS Global Accelerator](https://aws.amazon.com/jp/global-accelerator/?blogs-global-accelerator.sort-by=item.additionalFields.createdDate&blogs-global-accelerator.sort-order=desc&aws- global-accelerator-wn.sort-by = item.additionalFields.postdateTime & aws-global-accelerator-wn.sort-deSc\r\n\r\nTherefore, we use the A -record alias function of Route53.\r\n\r\n<Img Width = \"875\" Alt = \"Screenshot 2022-03-22 0 53 49\" src = \"https://user- Images.githubuserContent.com png \">\r\n\r\n<Img Width = \"885\" Alt = \"Screenshot 2022-03-22 0 56 09\" src = \"https://user- Images.githubuserContent.com png \">\r\n\r\nThe alias for endpoints can be set in the above form.\r\n\r\nIf you are not currently using Route53, you need to create a host zone with Route53 and set it from the name dot com or Google Domain management screen so that the value of the domain NS record is NS. (It takes a little time to reflect the change. At this time it was reflected in about an hour.)\r\n\r\nThis allows APEX DOMAIN to specify a variable road balancer endpoint.\r\n\r\nTwo records were registered as the actual registered value.\r\n\r\n`` `zsh\r\n$ DIG KEMU.SITE\r\n\r\n; << >> Dig 9.10.6 << >> Kemu.site\r\n;; Global Options: +CMD\r\n;; Got Answer:\r\n;; - >> Header << -Opcode: Query, Status: NOERROR, ID: 7482\r\n;; Flags: QR RD Ra; Query: 1, Answer: 2, Authority: 0, Additional: 1\r\n\r\n;; Opt Pseudosection:\r\n; EDNS: Version: 0, Flags :; UDP: 512\r\n;; Question Section:\r\nKemu.site. in a\r\n\r\n;; Answer Section:\r\nKemu.site. 60 in a 54.178.253.199\r\nKemu.site. 60 in a 13.231.15.68\r\n\r\n;; Query Time: 103 Msec\r\n;; Server: 2404: 1a8: 7f01: b :: 3#53 (2404: 1a8: 7f01: b: 3)\r\n;; When: Tue Mar 22 00:36:06 JST 2022\r\n;; MSG Size RCVD: 70\r\n`` `\r\n\r\nI don't know how to assign the IP internally, but it seems to insert A records and route so that I can set it like this.\r\n\r\n\r\n* If you want to prevent direct phosphorus by the IP address, you need to use AWS WAF. (I haven't set anything because I don't have any good information)", "reactions": {"url": "https://api.github.com/repos/kemu3007/portal/issues/22/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/kemu3007/portal/issues/22/timeline", "performed_via_github_app": null, "state_reason": null}