{"url": "https://api.github.com/repos/kemu3007/portal/issues/27", "repository_url": "https://api.github.com/repos/kemu3007/portal", "labels_url": "https://api.github.com/repos/kemu3007/portal/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/kemu3007/portal/issues/27/comments", "events_url": "https://api.github.com/repos/kemu3007/portal/issues/27/events", "html_url": "https://github.com/kemu3007/portal/issues/27", "id": 1189790754, "node_id": "I_kwDOG7qoq85G6sQi", "number": 27, "title": "Marked.js and Highlight.js handle GitHub Flavored Markdown", "user": {"login": "kemu3007", "id": 29157528, "node_id": "MDQ6VXNlcjI5MTU3NTI4", "avatar_url": "https://avatars.githubusercontent.com/u/29157528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kemu3007", "html_url": "https://github.com/kemu3007", "followers_url": "https://api.github.com/users/kemu3007/followers", "following_url": "https://api.github.com/users/kemu3007/following{/other_user}", "gists_url": "https://api.github.com/users/kemu3007/gists{/gist_id}", "starred_url": "https://api.github.com/users/kemu3007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kemu3007/subscriptions", "organizations_url": "https://api.github.com/users/kemu3007/orgs", "repos_url": "https://api.github.com/users/kemu3007/repos", "events_url": "https://api.github.com/users/kemu3007/events{/privacy}", "received_events_url": "https://api.github.com/users/kemu3007/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3898939400, "node_id": "LA_kwDOG7qoq87oZRgI", "url": "https://api.github.com/repos/kemu3007/portal/labels/article", "name": "article", "color": "C200E5", "default": false, "description": ""}, {"id": 3965428013, "node_id": "LA_kwDOG7qoq87sW6Et", "url": "https://api.github.com/repos/kemu3007/portal/labels/TypeScript", "name": "TypeScript", "color": "bfdadc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-01T13:22:10Z", "updated_at": "2022-04-03T05:01:14Z", "closed_at": null, "author_association": "OWNER", "active_lock_reason": null, "body": "The official name of Markdown handled on GitHub is called GitHub Flavored Markdown, which is a proprietary inscription that extends the default Markdown.\r\n\r\nThis time, apply the GitHub CSS of Highlight.js to convert the Markdown text to HTML.\r\n\r\n[GitHub Flavored Markdown Spec] (https://github.github.com/gfm/)\r\n\r\nLibrary used this time\r\n\r\n- [Highlight.js] (https://highlightjs.org/)\r\n- [Marked.js] (https://github.com/markedjs/marked)\r\n\r\n\r\n### introduction\r\n\r\n`` `bash\r\n$ NPM I Highlight.js Marked\r\n`` `\r\nIf you want to execute the tips code, install `Crypto-Es` at the same time.\r\n\r\n#####Convert GFM to HTML\r\n\r\nConvert the markdown text to HTML and set the CSS of Highlight.js for the code block.\r\n\r\n`` `TS\r\nImport {Marked} from 'Marked';\r\nImport HLJS from 'Highlight.js';\r\n\r\nCONST GFM_TEXT = \"\" \"\r\n\r\nMarked.Setoptions ({\r\n  Highlight: function (code, lang) {\r\n    CONST LANGUAGE = HLJS.GETLANGUAGE (LANG)? Lang: 'PlainText';\r\n    Return Hljs.Highlight (Code, {Language}). Value;\r\n  },\r\n  LANGPREFIX: 'HLJS Language-',\r\n  GFM: True,\r\n  Breaks: True,\r\n});\r\n\r\nMark.Parse (gfm_text)\r\n`` `\r\n\r\n### Highlight.js CSS application\r\n\r\nStyle.scss\r\n\r\n`` `SCSS\r\n@import '~ highlight.js/style/gitHub.css';\r\n`` `\r\n\r\n---\r\n\r\nThis allows you to display the Markdown in the same way as on GitHub. If there is no Background-Color in the code block, add CSS as appropriate.\r\n\r\n`` `SCSS\r\n: Host :: ng-Deep pref> code {\r\n  background-color: #f6f8fa;\r\n  BORDER-RADIUS: 10px;\r\n}\r\n`` `\r\n\r\n---\r\n\r\nTips: You can also overwrite and customize the Renderer in the following form.\r\n\r\n`` `TS\r\nImport {Marked, Renderer} from 'Marked';\r\nImport Crypt from 'Crypto-Es';\r\nImport HLJS from 'Highlight.js';\r\n\r\nCONST RENDERER = NEW RENDERER ();\r\n/** Add a fragment generated from the Hash value of the text and a button to copy the link to the header*///\r\nrenderer.heading = (text, lebel) => {\r\n  Cons Hash = Crypt.md5 (text);\r\n  Return `\r\n  <Div class = \"d-flex\">\r\n    <h $ {lebel}\r\n      ID = $ {Hash}\r\n      Style = \"Border-Left: Solid 3px; Border-Color: Darkturquoise; Border-Radius: 2px; padding-left: 5px;\"\r\n    > $ {text} </h {lebel}>\r\n    <Button class = \"btn btn-sm\">\r\n      <i class=\"bi bi-clipboard\" onclick=\"window.navigator.clipboard.writeText('${window.location.origin}${window.location.pathname}#${hash}')\"></i >\r\n    </bitton>\r\n  </Div>\r\n  `;\r\n};\r\nAdd Loading Lazy to/** img element*//\r\nrenderer.image = (href) => `<img src = {href} loading = lazy /;\r\n/** A link mark of Bootstrap Icon is given to the link element*///\r\nrenderer.link = (href, title, text) =>\r\n  `<a href=.5 {href pro\r\nMarked.Setoptions ({\r\n  Renderer,\r\n  Highlight: function (code, lang) {\r\n    CONST LANGUAGE = HLJS.GETLANGUAGE (LANG)? Lang: 'PlainText';\r\n    Return Hljs.Highlight (Code, {Language}). Value;\r\n  },\r\n  LANGPREFIX: 'HLJS Language-',\r\n  GFM: True,\r\n  Breaks: True,\r\n});\r\n\r\n`` `\r\n\r\nThis was able to render GFM.\r\n\r\nFor the actual source code you are using, see (here] (https://github.com/kemu3007/portal/blob/master/portal/src/app/markdown/markdown/markdown/markdown/marked.service.ts). ã€‚\r\n\r\n---\r\n\r\nCorrection history\r\n-Crypto-js migrates to Crypto-ES of ECMAScript module for Common JS Module", "reactions": {"url": "https://api.github.com/repos/kemu3007/portal/issues/27/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/kemu3007/portal/issues/27/timeline", "performed_via_github_app": null, "state_reason": null}