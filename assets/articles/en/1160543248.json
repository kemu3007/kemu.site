{"url": "https://api.github.com/repos/kemu3007/portal/issues/8", "repository_url": "https://api.github.com/repos/kemu3007/portal", "labels_url": "https://api.github.com/repos/kemu3007/portal/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/kemu3007/portal/issues/8/comments", "events_url": "https://api.github.com/repos/kemu3007/portal/issues/8/events", "html_url": "https://github.com/kemu3007/portal/issues/8", "id": 1160543248, "node_id": "I_kwDOG7qoq85FLHwQ", "number": 8, "title": "Limit the number of displayed models linked to the DRF", "user": {"login": "kemu3007", "id": 29157528, "node_id": "MDQ6VXNlcjI5MTU3NTI4", "avatar_url": "https://avatars.githubusercontent.com/u/29157528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kemu3007", "html_url": "https://github.com/kemu3007", "followers_url": "https://api.github.com/users/kemu3007/followers", "following_url": "https://api.github.com/users/kemu3007/following{/other_user}", "gists_url": "https://api.github.com/users/kemu3007/gists{/gist_id}", "starred_url": "https://api.github.com/users/kemu3007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kemu3007/subscriptions", "organizations_url": "https://api.github.com/users/kemu3007/orgs", "repos_url": "https://api.github.com/users/kemu3007/repos", "events_url": "https://api.github.com/users/kemu3007/events{/privacy}", "received_events_url": "https://api.github.com/users/kemu3007/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3898939400, "node_id": "LA_kwDOG7qoq87oZRgI", "url": "https://api.github.com/repos/kemu3007/portal/labels/article", "name": "article", "color": "C200E5", "default": false, "description": ""}, {"id": 3900075763, "node_id": "LA_kwDOG7qoq87odm7z", "url": "https://api.github.com/repos/kemu3007/portal/labels/Django", "name": "Django", "color": "5FC353", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-06T07:46:40Z", "updated_at": "2022-03-06T15:20:58Z", "closed_at": null, "author_association": "OWNER", "active_lock_reason": null, "body": "Django has a function called `Prefetch_related`, and the SQL issued can be suppressed by describing as follows.\r\n\r\n`` `python\r\nArticle.Objects.prefetch_related (\"tags\")\r\n`` `\r\n\r\nBy describing, the value of Manytomany is saved in the cache, and the number of SQL issued is reduced.\r\n\r\nApply this function,\r\n\r\n`` `python\r\nClass Article ViewSets (ModelViewSet):\r\n    Def Get_querySet (Self):\r\n        Return Article.objects.all (). Prefetch_related\r\n`` `\r\n\r\nIt is possible to filter the values ​​of Article.tags returned by describing.\r\n\r\nHowever, this method cannot change the display based on records, such as publishing all tags when the status of Article is drafted and all tags will be released when publishing.\r\n\r\n\r\nAt that time, you use `preFetch_related_objects`.\r\n\r\nIf you write the above -mentioned process using Prefetch_related_object, it will be as follows.\r\n\r\n\r\n`` `python\r\nClass Article ViewSets (ModelViewSet):\r\n    Def Retrieve (Self, Request, *Args, ** kwargs):\r\n        Instance: Article = Self.get_object ()\r\n        tags = tag.objects.all ()\r\n        # Restrict the file to be returned according to the status\r\n        if instance.status == articles.statuschoices.draft:\r\n             tags = tag.objects.none ()\r\n        Prefetch_related_objects ([Instance], Prefetch (\"Tags\", Tags))\r\n        Serializer = Self.get_serializer (Instance)\r\n        Return Response (Serializer.data)\r\n`` `\r\n\r\nBy describing this, it is possible to limit the value of the Tags to be returned.", "reactions": {"url": "https://api.github.com/repos/kemu3007/portal/issues/8/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/kemu3007/portal/issues/8/timeline", "performed_via_github_app": null, "state_reason": null}