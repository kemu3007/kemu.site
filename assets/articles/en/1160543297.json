{"url": "https://api.github.com/repos/kemu3007/portal/issues/9", "repository_url": "https://api.github.com/repos/kemu3007/portal", "labels_url": "https://api.github.com/repos/kemu3007/portal/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/kemu3007/portal/issues/9/comments", "events_url": "https://api.github.com/repos/kemu3007/portal/issues/9/events", "html_url": "https://github.com/kemu3007/portal/issues/9", "id": 1160543297, "node_id": "I_kwDOG7qoq85FLHxB", "number": 9, "title": "Write a front -end test (snapshot test edition)", "user": {"login": "kemu3007", "id": 29157528, "node_id": "MDQ6VXNlcjI5MTU3NTI4", "avatar_url": "https://avatars.githubusercontent.com/u/29157528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kemu3007", "html_url": "https://github.com/kemu3007", "followers_url": "https://api.github.com/users/kemu3007/followers", "following_url": "https://api.github.com/users/kemu3007/following{/other_user}", "gists_url": "https://api.github.com/users/kemu3007/gists{/gist_id}", "starred_url": "https://api.github.com/users/kemu3007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kemu3007/subscriptions", "organizations_url": "https://api.github.com/users/kemu3007/orgs", "repos_url": "https://api.github.com/users/kemu3007/repos", "events_url": "https://api.github.com/users/kemu3007/events{/privacy}", "received_events_url": "https://api.github.com/users/kemu3007/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3898939400, "node_id": "LA_kwDOG7qoq87oZRgI", "url": "https://api.github.com/repos/kemu3007/portal/labels/article", "name": "article", "color": "C200E5", "default": false, "description": ""}, {"id": 3900074882, "node_id": "LA_kwDOG7qoq87odmuC", "url": "https://api.github.com/repos/kemu3007/portal/labels/Angular", "name": "Angular", "color": "D93F0B", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-06T07:47:02Z", "updated_at": "2022-03-06T15:20:21Z", "closed_at": null, "author_association": "OWNER", "active_lock_reason": null, "body": "### environment\r\nAngular 13, node 16\r\n\r\nThis time, delete the karma contained by default to use JEST.\r\n`` `SH\r\nNPM RUN NG ADD @BRIEBUG/JEST-SCHEMATIC\r\n`` `\r\n\r\nReference: https://github.com/briebug/jest-shematic\r\n\r\n### Write a test\r\n-app.component.spec.ts\r\n\r\n`` `TS\r\n  IT ('Snapshot Test', () => {\r\n    CONST FIXTURE = Testbed.createcomponent (AppComponent);\r\n    fixture.detectChanges ();\r\n    CONST Compile = Fixture.nativeLement;\r\n    EXPECT (Compile) .tomatchSnapshot ();\r\n  })\r\n`` `\r\n\r\n### execution\r\n\r\n`NPM Run Test` When running a test with a test with an existing snapshot or`-update-snapshot` is attached as an option, a directory is created. The following is an example.\r\n\r\n-`__snapshots __/app.component.spec.snap`\r\n\r\n`` `TS\r\n// Jest snapshot v1, https://goo.gl/fbaqlp\r\n\r\nEXPORTS [`AppComponent Snapshot Test 1`] =`\r\n<Div\r\n  ID = \"root2\"\r\n>\r\n  <MAT-TOOLBAR>\r\n    <MAT-TOOLBAR-ROW\r\n      style = \"padding: 0 16px 0;\"\r\n    >\r\n      <Button\r\n        MAT-BUTTON = \"\" \"\r\n      >\r\n...\r\n`` `\r\nIn the event of a test failure, it is displayed as follows.\r\n\r\n`` `bash\r\n    EXPECT (Received) .tomatchSnapshot ()\r\n\r\n    Snapshot Name: `AppComponent Snapshot Test 1`\r\n\r\n    -SNAPSHOT -1\r\n    + Received + 1\r\n\r\n    @@1,11 +1,11 @@@\r\n      <Div\r\n        ID = \"root2\"\r\n      >\r\n        <MAT-TOOLBAR>\r\n          <MAT-TOOLBAR-ROW\r\n    -style = \"padding: 0 16px 0;\"\r\n    + style = \"padding: 1 16px 0;\"\r\n          >\r\n            <Button\r\n              MAT-BUTTON = \"\" \"\r\n            >\r\n              <Mat-iCon>\r\n\r\n      33 | Fixture.DetectChanges ();\r\n      34 | Cons CompileD = Fixture.nativeLement;\r\n    > 35 | EXPECT (compile) .tomatchSnapshot ();\r\n         | ^\r\n      36 |})\r\n      37 |});\r\n      38 |\r\n\r\n      at src/app/app.component.spec.ts: 35: 22\r\n      at zonedelegate.object. <Anonymous> .zonedelegate.invoke (node_modules/zone.js/bundles/zone-testing-bundle.umd.js: 407: 30)\r\n      at proxyzonespec.object. <Anonymous> .Proxyzonesc.oninvoke (node_modules/zone.js/bundles/zone-testing-bundle.umd.js: 3765: 43)\r\n      at zonedelegate.object. <Anonymous> .zonedelegate.invoke (node_modules/zone.js/bundles/zone-testing-bundle.umd.js: 406: 56)\r\n      at zone.object. <Anonymous> .zone.run (node_modules/zone.js/bundles/zone-testing- bundle.umd.js: 167: 47)\r\n      at object.wrappedfunc (node_modules/zone.js/bundles/zone-testing-bundle.umd.js: 4250: 34)\r\n\r\n ›1 Snapshot Failed.\r\nSnapshot Summary\r\n ›1 Snapshot Failed from 1 Test Suite. Inspect Your Code Changes or Re-Run Jest with` -u` To Update Them.\r\n\r\nTest Suits: 1 Failed, 1 Total\r\nTests: 1 Failed, 2 Passed, 3 Total\r\nSnapshots: 1 Failed, 1 Total\r\nTime: 1.667 S, Estimated 2 S\r\nRan All Test Suits.\r\n`` `\r\n\r\n### Meaning of testing\r\n\r\nWhen modifying to the front end, you can lightly assert the effects of the corrections.\r\n\r\nThe problems are as follows.\r\n\r\n-I can't assert without writing CSS in style format\r\n-In the components displayed according to the conditions, it is necessary to add and assert separately (because it is slow if you take Snapshot every time).\r\n\r\nRegarding CSS, it is noticeable that it is necessary to write in the inline to see it in the test, but you will not want to lower the readability by describing CSS online.\r\n\r\n### important point\r\n\r\n`__snapshots___` The directory looks a bit, but it needs to be managed by Git.\r\n\r\n### General commentary\r\n\r\nWell, it is a test that should be divided lightly without excessive expectations.", "reactions": {"url": "https://api.github.com/repos/kemu3007/portal/issues/9/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/kemu3007/portal/issues/9/timeline", "performed_via_github_app": null, "state_reason": null}