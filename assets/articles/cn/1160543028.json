{"url": "https://api.github.com/repos/kemu3007/portal/issues/6", "repository_url": "https://api.github.com/repos/kemu3007/portal", "labels_url": "https://api.github.com/repos/kemu3007/portal/issues/6/labels{/name}", "comments_url": "https://api.github.com/repos/kemu3007/portal/issues/6/comments", "events_url": "https://api.github.com/repos/kemu3007/portal/issues/6/events", "html_url": "https://github.com/kemu3007/portal/issues/6", "id": 1160543028, "node_id": "I_kwDOG7qoq85FLHs0", "number": 6, "title": "自动生成django管理员", "user": {"login": "kemu3007", "id": 29157528, "node_id": "MDQ6VXNlcjI5MTU3NTI4", "avatar_url": "https://avatars.githubusercontent.com/u/29157528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kemu3007", "html_url": "https://github.com/kemu3007", "followers_url": "https://api.github.com/users/kemu3007/followers", "following_url": "https://api.github.com/users/kemu3007/following{/other_user}", "gists_url": "https://api.github.com/users/kemu3007/gists{/gist_id}", "starred_url": "https://api.github.com/users/kemu3007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kemu3007/subscriptions", "organizations_url": "https://api.github.com/users/kemu3007/orgs", "repos_url": "https://api.github.com/users/kemu3007/repos", "events_url": "https://api.github.com/users/kemu3007/events{/privacy}", "received_events_url": "https://api.github.com/users/kemu3007/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3898939400, "node_id": "LA_kwDOG7qoq87oZRgI", "url": "https://api.github.com/repos/kemu3007/portal/labels/article", "name": "article", "color": "C200E5", "default": false, "description": ""}, {"id": 3900075763, "node_id": "LA_kwDOG7qoq87odm7z", "url": "https://api.github.com/repos/kemu3007/portal/labels/Django", "name": "Django", "color": "5FC353", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-06T07:45:18Z", "updated_at": "2022-03-06T15:21:16Z", "closed_at": null, "author_association": "OWNER", "active_lock_reason": null, "body": "我忘了注册管理员，这很麻烦，所以请把它作为笔记。\r\n\r\n####方便的时机\r\n-django管理员我不想专注于太多，但是我想要最小功能\r\n - 我忘记了添加模型时忘记`admin.site.register`，所以我想做一些事情\r\n\r\n####实际代码\r\n-urls.py\r\n\r\n``python\r\nurlpatterns = [\r\n    路径（“ admin/atnation/”，autogenerateadminsite（）。URL）\r\n这是给予的\r\n````````\r\n\r\n-admin.py\r\n\r\n``python\r\n从输入导入类型\r\n来自django.contrib.admin.options Import ModelAdmin\r\n来自django.contrib.admin.Sites Import Adminsite\r\n来自django.apps导入应用程序\r\n来自django.db导入模型\r\n来自colorfield.fields导入颜色\r\n\r\n\r\ndef get_admin_model（模型：类型[models.model]） - > type [modeladmin]：\r\n    list_display_fields = [Models.Charfield，Models.integerfield，Models.posistiveIntegerfield，Models.Foreignkey，Models.Booleanfield，Colorfield，Colorfield。\r\n    list_editable_field = [Models.integerfield，Models.positalStiveIntegerfield，Models.Booleanfield，colorfield]\r\n    list_display = [“ PK”]\r\n    list_edible = []\r\n    对于模型中的字段。_META.FIELDS：\r\n        如果list_display_fields中的类型（字段）：\r\n            list_display.append（field.name）\r\n        如果type（field）在list_ediate_field and field.itable中：\r\n            list_editable.append（field.name）\r\n    返回类型（f“ {model._meta.model_name} modelAdmin”，（modelAdmin，），{“ list_display”：list_display“：list_ediable”：list_editable“：list_edible”：list_edistion，“ ordering”：model._meta.dordering或[pk“ pk”]}）\r\n\r\n\r\n类自动基质矿石（Adminsite）：\r\n    display_app_list = ['sites'，'shared'，'文章'，'contact']\r\n\r\n    def __init __（self， *args，** kwargs） - >无：\r\n        super（）.__ init__（*args，** kwargs）\r\n        self._registic = {模型：get_admin_model（model）（模型）（模型，admin_site = self）apps.get_models中的模型\r\n\r\n    def _build_app_dict（self，请求）：\r\n        app_dict = super（）._ build_app_dict（请求）\r\n        返回dict（filter（lambda app：app [0] in self.display_app_list，app_dict.items（）））\r\n````````\r\n\r\n创建继承django.contrib.admin.sites.Adminsite`的`autogenerateadMinsite`，并将任何模型添加到`autogenerateadeadminsite._registry“。\r\n\r\n由于使用了`django.apps.get_models`，因此还显示您不想在诸如会话之类的管理中看到太多的数据。\r\n\r\n为了在应用程序中排除此类数据，我们缩小了“ _build_app_dict”中显示的应用程序。\r\n\r\n这次用于操作验证的代码是[here]（https://github.com/kemu3007/blog/blob/master/master/src/src/apps/admin.py）", "reactions": {"url": "https://api.github.com/repos/kemu3007/portal/issues/6/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/kemu3007/portal/issues/6/timeline", "performed_via_github_app": null, "state_reason": null}