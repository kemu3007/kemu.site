{"url": "https://api.github.com/repos/kemu3007/portal/issues/57", "repository_url": "https://api.github.com/repos/kemu3007/portal", "labels_url": "https://api.github.com/repos/kemu3007/portal/issues/57/labels{/name}", "comments_url": "https://api.github.com/repos/kemu3007/portal/issues/57/comments", "events_url": "https://api.github.com/repos/kemu3007/portal/issues/57/events", "html_url": "https://github.com/kemu3007/portal/issues/57", "id": 1276252097, "node_id": "I_kwDOG7qoq85MEg_B", "number": 57, "title": "Python Typehint new / deprecated", "user": {"login": "kemu3007", "id": 29157528, "node_id": "MDQ6VXNlcjI5MTU3NTI4", "avatar_url": "https://avatars.githubusercontent.com/u/29157528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kemu3007", "html_url": "https://github.com/kemu3007", "followers_url": "https://api.github.com/users/kemu3007/followers", "following_url": "https://api.github.com/users/kemu3007/following{/other_user}", "gists_url": "https://api.github.com/users/kemu3007/gists{/gist_id}", "starred_url": "https://api.github.com/users/kemu3007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kemu3007/subscriptions", "organizations_url": "https://api.github.com/users/kemu3007/orgs", "repos_url": "https://api.github.com/users/kemu3007/repos", "events_url": "https://api.github.com/users/kemu3007/events{/privacy}", "received_events_url": "https://api.github.com/users/kemu3007/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3898939400, "node_id": "LA_kwDOG7qoq87oZRgI", "url": "https://api.github.com/repos/kemu3007/portal/labels/article", "name": "article", "color": "C200E5", "default": false, "description": ""}, {"id": 3900078597, "node_id": "LA_kwDOG7qoq87odnoF", "url": "https://api.github.com/repos/kemu3007/portal/labels/Python", "name": "Python", "color": "1D76DB", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-20T01:47:30Z", "updated_at": "2022-06-29T14:04:47Z", "closed_at": null, "author_association": "OWNER", "active_lock_reason": null, "body": "\r\n気がつかないうちに追加 / 非推奨になっていた項目があったため紹介します。非推奨項目が多いのでよく利用されるもののみ記載しています。\r\n\r\n詳しくは公式ドキュメントを参照してください。\r\n\r\ndocument: https://docs.python.org/ja/3/library/typing.html\r\n\r\n## 追加されたTypehint\r\n\r\n利用するケースが想定され、便利そうなもののみ記載しています。詳しく知りたい方は公式ドキュメントを参照してください。\r\n\r\n### typing.Literal\r\n\r\nPython3.8~ 利用可能\r\n\r\n持ちうる具体的な値を指定することが可能です。\r\n\r\n```python3\r\ndef test_function(value: Literal[1, 2, 3])\r\n\t...\r\n\r\n\r\ntest_function(0) <-- raise Error\r\n```\r\n\r\n### typing.TypedDict\r\n\r\nPython3.8~ 利用可能\r\n\r\n```python3\r\nfrom typing import TypedDict\r\n\r\ndict_type = TypedDict(\"DictType\", { \"key\": str, \"value\": str })\r\n\r\nclass DictType(TypedDict):\r\n\tkey: str\r\n\tvalue: str\r\n```\r\n\r\nPython3.11~ はRequired, NotRequired型が追加されます。\r\n\r\n```python3\r\nclass DictType(TypedDict):\r\n\tkey: str\r\n\tvalue: str\r\n\toptional_key: NotRequired[str]\r\n```\r\n\r\nNotRequiredはキーが存在するか存在しないかわからない場合に利用することができます。\r\n\r\nRequiredはtotal=Falseと指定したケースについても必須なキーに対して利用することで型の付与が可能です。\r\n\r\n3.10~ は `is_typeddict()` も追加され、判定を行うことが可能です。(ちょっと利用するケースがわからないけれど）\r\n\r\n### typing.TypeGuard\r\n\r\nPython3.10~ 利用可能\r\n\r\n```python3\r\ndef is_str(val: str | float) -> TypeGuard[str]:\r\n\treturn isinstance(val, str)\r\n```\r\n判定式でTrueが返却された際の引数の型を指定可能です。\r\n\r\n\r\n### typing.overload\r\n\r\n引数と戻り値の型が連動している際に利用できます。\r\n\r\n```python3\r\n@overload\r\ndef test_function(value: int) -> int\r\n\t...\r\n\r\n@overload\r\ndef test_function(value: List[int]) -> List[int]\r\n\t...\r\n\r\ndef test_function(value: int | List[int]) -> int | List[int]\r\n\t...\r\n\r\n\r\ntest_function(1) --> int\r\ntest_function([1, 2, 3]) -> list[int]\r\n```\r\n\r\n### typing.final\r\n\r\nPython3.8~ 利用可能\r\n\r\n継承、上書きされたくないケースで利用できます。\r\n\r\n```python3\r\nclass BaseClass:\r\n\t@final\r\n\tdef test_function(self):\r\n\t\t...\r\n\r\nclass ExtendClass(BaseClass):\r\n\tdef test_function <-- raise ERROR\r\n\r\n@final\r\nclass NotBaseClass:\r\n\t...\r\n\r\nclass ExtendClass2(NotBaseClass) <-- raise ERROR\r\n```\r\n\r\n## 非推奨 Typehint\r\n他にも非推奨項目が存在しますが良く利用されているのはこの3つなので割愛します。詳しくは公式ドキュメントを参照してください。\r\n\r\n\r\n###  typing.Dict\r\n\r\nPython3.9~よりdeprecated\r\n\r\n組み込みのdictがdict[str, str]といった型に対応しました。\r\n\r\n\r\n\r\n### typing.List\r\n\r\nPython3.9~よりdeprecated\r\n\r\n組み込みのlistがlist[str]といった型指定に対応しました。\r\n\r\n\r\n### typing.Callable\r\n\r\nPython3.9~よりdeprecated\r\n\r\ncollections.abc.CallableがCallable[[str], str]といった型指定に対応しました。\r\n", "reactions": {"url": "https://api.github.com/repos/kemu3007/portal/issues/57/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/kemu3007/portal/issues/57/timeline", "performed_via_github_app": null, "state_reason": null}