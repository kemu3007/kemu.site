{
  "url": "https://api.github.com/repos/kemu3007/portal/issues/27",
  "repository_url": "https://api.github.com/repos/kemu3007/portal",
  "labels_url": "https://api.github.com/repos/kemu3007/portal/issues/27/labels{/name}",
  "comments_url": "https://api.github.com/repos/kemu3007/portal/issues/27/comments",
  "events_url": "https://api.github.com/repos/kemu3007/portal/issues/27/events",
  "html_url": "https://github.com/kemu3007/portal/issues/27",
  "id": 1189790754,
  "node_id": "I_kwDOG7qoq85G6sQi",
  "number": 27,
  "title": "用marked.js和highlight.js处理GitHub风味的Markdown",
  "user": {
    "login": "kemu3007",
    "id": 29157528,
    "node_id": "MDQ6VXNlcjI5MTU3NTI4",
    "avatar_url": "https://avatars.githubusercontent.com/u/29157528?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kemu3007",
    "html_url": "https://github.com/kemu3007",
    "followers_url": "https://api.github.com/users/kemu3007/followers",
    "following_url": "https://api.github.com/users/kemu3007/following{/other_user}",
    "gists_url": "https://api.github.com/users/kemu3007/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kemu3007/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kemu3007/subscriptions",
    "organizations_url": "https://api.github.com/users/kemu3007/orgs",
    "repos_url": "https://api.github.com/users/kemu3007/repos",
    "events_url": "https://api.github.com/users/kemu3007/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kemu3007/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3898939400,
      "node_id": "LA_kwDOG7qoq87oZRgI",
      "url": "https://api.github.com/repos/kemu3007/portal/labels/article",
      "name": "article",
      "color": "C200E5",
      "default": false,
      "description": ""
    },
    {
      "id": 3965428013,
      "node_id": "LA_kwDOG7qoq87sW6Et",
      "url": "https://api.github.com/repos/kemu3007/portal/labels/TypeScript",
      "name": "TypeScript",
      "color": "bfdadc",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2022-04-01T13:22:10Z",
  "updated_at": "2022-04-03T05:01:14Z",
  "closed_at": null,
  "author_association": "OWNER",
  "active_lock_reason": null,
  "body": "在GitHub上处理的Markdown的官方名称叫做GitHub Flavored Markdown，这是一个不言自明的符号，扩展了默认的Markdown。\n\n这一次，GitHub css for highlight.js被应用于将Markdown文本转换为HTML。\n\n[GitHub Flavored Markdown spec](https://github.github.com/gfm/)\n\n本项目中使用的图书馆\n\n-  [highlight.js](https://highlightjs.org/)\n-  [marked.js](https://github.com/markedjs/marked)\n\n\n###介绍。\n\n```bash\n$ npm i highlight.js marked\n```\n如果你想运行提示中的代码，你必须同时安装`crypto- es`。\n\n#### 将GFM转换为HTML\n\n将Markdown文本转换为HTML，并设置highlight.js css以击中代码块。\n\n```ts\nimport { marked } from 'marked';\nimport hljs from 'highlight.js';\n\nconst gfm_text = \"\"\n\nmarked.setOptions({\n  highlight: function (code, lang) {\n    const language = hljs.getLanguage(lang) ? lang : 'plaintext';\n    return hljs.highlight(code, { language }).value;\n  },\n  langPrefix: 'hljs language-',\n  gfm: true,\n  breaks: true,\n});\n\nmarkd.parse(gfm_text)\n```\n\n###应用highlight.js css\n\nstyle.scss。\n\n```scss\n@import '~highlight.js/styles/github.css';\n```\n\n- - - \n\n这允许Markdown以与GitHub相同的方式显示。例如，如果一个代码块的背景颜色不存在，请适当地添加和应用css。\n\n```scss\n:host ::ng-deep pre > code {\n  background-color: #f6f8fa;\n  border-radius: 10px;\n}\n```\n\n- - - \n\n提示：你也可以通过以下方式覆盖和定制渲染器\n\n```ts\nimport { marked, Renderer } from 'marked';\nimport crypt from 'crypto-es';\nimport hljs from 'highlight.js';\n\nconst renderer = new Renderer();\n/** ヘッダーにはテキストのhash値から生成したフラグメント, リンクをコピーするボタンを追加する */\nrenderer.heading = (text, lebel) => {\n  const hash = crypt.MD5(text);\n  return `\n  <div class=\"d-flex\">\n    <h${lebel}\n      id=${hash}\n      style=\"border-left: solid 3px; border-color: darkturquoise; border-radius: 2px; padding-left: 5px;\"\n    >${text}</h${lebel}>\n    <button class=\"btn btn-sm\">\n      <i class=\"bi bi-clipboard\" onclick=\"window.navigator.clipboard.writeText('${window.location.origin}${window.location.pathname}#${hash}')\"></i>\n    </button>\n  </div>\n  `;\n};\n/** img要素にloading lazyを追加する */\nrenderer.image = (href) => `<img src=${href} loading=lazy />`;\n/** リンク要素にbootstrap iconのリンクマークを付与する */\nrenderer.link = (href, title, text) =>\n  `<a href=${href} class=\"text-muted\">${text}<i class=\"bi bi-link-45deg\"></i></a>`;\nmarked.setOptions({\n  renderer,\n  highlight: function (code, lang) {\n    const language = hljs.getLanguage(lang) ? lang : 'plaintext';\n    return hljs.highlight(code, { language }).value;\n  },\n  langPrefix: 'hljs language-',\n  gfm: true,\n  breaks: true,\n});\n\n```\n\n这使得GFM能够被呈现出来。\n\n实际使用的源代码可以在[这里]（https://github.com/kemu3007/portal/blob/master/portal/src/app/shared/markdown/marked.service.ts）找到。\n\n- - - \n\n修订历史\n-  因为共同的js模块，crypto- js向ECMAScript模块crypto- es的迁移",
  "reactions": {
    "url": "https://api.github.com/repos/kemu3007/portal/issues/27/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/kemu3007/portal/issues/27/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
