{"version":3,"mappings":"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","names":["i0","ctx_r5","ctx_r7","BlogDetailComponent","constructor","route","markedService","sanitizer","articlesService","router","this","marked","article","_article","html","bypassSecurityTrustHtml","parse","body","snapshot","fragment","interval","pipe","take","subscribe","_","window","location","replace","origin","pathname","issueId","paramMap","get","ngOnInit","getList","articles","getComments","comments","adsLength","hasMd","screen","width","articleIds","Object","keys","navigateByIssueId","routeReuseStrategy","shouldReuseRoute","navigate","nextArticleId","length","nextIds","map","Number","filter","Math","min","toString","pastArticleId","pastIds","max","selectors","routes","path","component","articleService","text$","debounceTime","distinctUntilChanged","text","searchData","title","toLowerCase","includes","page","queryParamMap","pageIndex","articleKeys","sort","a","b","data","forEach","key","getLabels","name","labels","label","selectArticle","event","item","switchPage","queryParams","displayArticles","startIndex","pageSize","slice","BlogListComponent","ctx","_r0","BlogRoutingModule","RouterModule","BlogModule","CommonModule","SharedModule"],"sources":["./src/app/blog/blog-detail/blog-detail.component.html","./src/app/blog/blog-detail/blog-detail.component.ts","./src/app/blog/blog-list/blog-list.component.html","./src/app/blog/blog-routing.module.ts","./src/app/blog/blog-list/blog-list.component.ts","./src/app/blog/blog.module.ts"],"sourcesContent":["<div class=\"container-fluid\" id=\"container\">\n  <div class=\"row mt-3\" *ngIf=\"article\">\n    <div class=\"col-md-8 border-end border-2 pb-5\">\n      <div class=\"row\">\n        <div class=\"col-md-4\">\n          <app-lazy-img\n            [src]=\"'/assets/images/' + article.id + '.png'\"\n            [alt]=\"article.title\"\n            [title]=\"article.title\"\n          ></app-lazy-img>\n        </div>\n        <div class=\"col-md-8\">\n          <h2>{{ article.title }}</h2>\n          <p class=\"text-muted mb-1\">発行日時: {{ article.created_at | date: 'yyyy.MM.dd hh:mm' }}</p>\n          <p class=\"text-muted\">最終更新日: {{ article.updated_at | date: 'yyyy.MM.dd hh:mm' }}</p>\n          <div class=\"d-flex justify-content-end\">\n            <app-tweet-btn></app-tweet-btn>\n          </div>\n        </div>\n      </div>\n      <hr />\n      <div [innerHTML]=\"html\"></div>\n      <hr class=\"mt-5\" />\n      <div class=\"d-flex justify-content-between\">\n        <h2 id=\"comments\">Comments</h2>\n        <app-tweet-btn></app-tweet-btn>\n      </div>\n      <div class=\"card\" *ngFor=\"let comment of comments\">\n        <div class=\"card-body pt-1 ps-1\">\n          <div class=\"d-flex\">\n            <img width=\"24\" [src]=\"comment.user.avatar_url\" />\n            <a class=\"ms-2\" [href]=\"comment.user.html_url\">{{ comment.user.login }}</a\n            ><br />\n          </div>\n          <hr class=\"mt-1 mb-1\" />\n          {{ comment.body }}\n        </div>\n      </div>\n      <p class=\"mt-3\">\n        コメントは<a [href]=\"article.html_url\">こちら<i class=\"bi bi-link-45deg\"></i></a>から\n        <br />\n        ※リリースタイミングの問題上ページに反映されないことがありますが確認してます。\n      </p>\n      <hr />\n      <h3>別の記事を見る</h3>\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <ng-container *ngIf=\"nextArticleId\">\n            <div class=\"card\">\n              <div class=\"card-header\">次の記事</div>\n              <div class=\"card-body\">\n                <span class=\"link-primary\" style=\"cursor: pointer\" (click)=\"navigateByIssueId(nextArticleId)\">{{\n                  articles[nextArticleId!].title\n                }}</span>\n              </div>\n            </div>\n          </ng-container>\n        </div>\n        <div class=\"col-md-6\">\n          <ng-container *ngIf=\"pastArticleId\">\n            <div class=\"card\">\n              <div class=\"card-header\">前の記事</div>\n              <div class=\"card-body\">\n                <span class=\"link-primary\" style=\"cursor: pointer\" (click)=\"navigateByIssueId(pastArticleId)\">{{\n                  articles[pastArticleId!].title\n                }}</span>\n              </div>\n            </div>\n          </ng-container>\n        </div>\n      </div>\n    </div>\n    <div class=\"col-md-4 bg-light\">\n      <app-ads [count]=\"adsLength\" type=\"box\"></app-ads>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Article, ArticleDetail } from '@app/shared/articles/articles';\nimport { ArticlesService } from '@app/shared/articles/articles.service';\nimport { Comment } from '@app/shared/articles/comments';\nimport { MarkedService } from '@app/shared/markdown/marked.service';\nimport { interval, take } from 'rxjs';\n\n@Component({\n  selector: 'app-blog-detail',\n  templateUrl: './blog-detail.component.html',\n  styleUrls: ['./blog-detail.component.scss'],\n})\nexport class BlogDetailComponent implements OnInit {\n  marked = this.markedService.marked;\n  articles: Record<string, Article> = {};\n  _article?: ArticleDetail;\n  comments: Comment[] = [];\n  html: SafeHtml = '';\n\n  constructor(\n    private route: ActivatedRoute,\n    private markedService: MarkedService,\n    private sanitizer: DomSanitizer,\n    private articlesService: ArticlesService,\n    private router: Router\n  ) {}\n\n  get article() {\n    return this._article;\n  }\n\n  set article(article: ArticleDetail | undefined) {\n    if (article) {\n      this._article = article;\n      this.html = this.sanitizer.bypassSecurityTrustHtml(this.marked.parse(article.body));\n      if (this.route.snapshot.fragment) {\n        interval(100)\n          .pipe(take(1))\n          .subscribe((_) => {\n            window.location.replace(\n              `${window.location.origin}${window.location.pathname}#${this.route.snapshot.fragment}`\n            );\n          });\n      }\n    }\n  }\n\n  get issueId() {\n    return this.route.snapshot.paramMap.get('id');\n  }\n\n  ngOnInit(): void {\n    this.articlesService.getList('/assets/articles/list.json').subscribe((articles) => (this.articles = articles));\n    this.articlesService.get(`/assets/articles/${this.issueId}.json`).subscribe((article) => (this.article = article));\n    this.articlesService\n      .getComments(`/assets/comments/${this.issueId}.json`)\n      .subscribe((comments) => (this.comments = comments));\n  }\n\n  get adsLength(): number {\n    const hasMd = window.screen.width >= 768;\n    return hasMd ? 4 : 1;\n  }\n\n  get articleIds(): string[] {\n    return Object.keys(this.articles);\n  }\n\n  navigateByIssueId(issueId: string) {\n    this.router.routeReuseStrategy.shouldReuseRoute = () => false;\n    this.router.navigate(['/blog/', issueId]);\n  }\n\n  get nextArticleId(): string | null {\n    if (this.articleIds.length) {\n      const nextIds = this.articleIds\n        .map((issueId) => Number(issueId))\n        .filter((issueId) => issueId > Number(this.issueId));\n      if (nextIds.length) {\n        return Math.min(...nextIds).toString();\n      }\n      return null;\n    }\n    return null;\n  }\n\n  get pastArticleId(): string | null {\n    if (this.articleIds.length) {\n      const pastIds = this.articleIds\n        .map((issueId) => Number(issueId))\n        .filter((issueId) => issueId < Number(this.issueId));\n      if (pastIds.length) {\n        return Math.max(...pastIds).toString();\n      }\n      return null;\n    }\n    return null;\n  }\n}\n","<div class=\"container-fluid\">\n  <div class=\"row mt-3\">\n    <div class=\"col-md-8 border-end border-2\">\n      <input\n        class=\"form-control mb-1\"\n        placeholder=\"Search...\"\n        NgbTypeahead\n        [ngbTypeahead]=\"search\"\n        (selectItem)=\"selectArticle($event)\"\n        #instance=\"ngbTypeahead\"\n        (blur)=\"instance.dismissPopup()\"\n      />\n      <div class=\"d-flex justify-content-center\">\n        <mat-paginator\n          hidePageSize\n          showFirstLastButtons\n          (page)=\"switchPage($event)\"\n          [length]=\"articleKeys.length\"\n          [pageSize]=\"10\"\n          [pageIndex]=\"pageIndex\"\n        ></mat-paginator>\n      </div>\n      <div *ngFor=\"let key of displayArticles; index as i\">\n        <a\n          class=\"card shadow mt-1 text-decoration-none text-muted\"\n          [routerLink]=\"['/blog', key]\"\n          style=\"cursor: pointer\"\n        >\n          <div class=\"card-body\">\n            <div class=\"row\">\n              <h3 class=\"col-9 card-link text-black mb-0\">\n                {{ articles[key].title }}\n              </h3>\n              <div class=\"col-3 d-flex align-items-start justify-content-end\">\n                <p\n                  class=\"badge rounded-pill\"\n                  *ngFor=\"let label of getLabels(articles[key])\"\n                  [ngStyle]=\"{ 'background-color': '#' + label.color }\"\n                >\n                  {{ label.name }}\n                </p>\n              </div>\n              <div class=\"col-12\">{{ articles[key].created_at | date: 'yyyy.MM.dd' }}</div>\n            </div>\n            <hr class=\"mt-0\" />\n            <p class=\"card-text\">{{ articles[key].body }}</p>\n          </div>\n        </a>\n        <div class=\"card shadow mt-1\" *ngIf=\"(i + 1) % 3 === 0\">\n          <app-ads type=\"auto\"></app-ads>\n        </div>\n      </div>\n      <div class=\"d-flex justify-content-center\">\n        <mat-paginator\n          hidePageSize\n          showFirstLastButtons\n          (page)=\"switchPage($event)\"\n          [length]=\"articleKeys.length\"\n          [pageSize]=\"10\"\n          [pageIndex]=\"pageIndex\"\n        ></mat-paginator>\n      </div>\n    </div>\n    <div class=\"col-md-4 bg-light\">\n      <app-ads type=\"box\" [count]=\"adsLength\"></app-ads>\n    </div>\n  </div>\n</div>\n","import { BlogDetailComponent } from './blog-detail/blog-detail.component';\nimport { BlogListComponent } from './blog-list/blog-list.component';\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nconst routes: Routes = [\n  { path: '', component: BlogListComponent },\n  { path: ':id', component: BlogDetailComponent },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class BlogRoutingModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { PageEvent } from '@angular/material/paginator';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Article, Label } from '@app/shared/articles/articles';\nimport { ArticlesService } from '@app/shared/articles/articles.service';\nimport { NgbTypeaheadSelectItemEvent } from '@ng-bootstrap/ng-bootstrap';\nimport { debounceTime, distinctUntilChanged, map, Observable, OperatorFunction } from 'rxjs';\n\n@Component({\n  selector: 'app-blog-list',\n  templateUrl: './blog-list.component.html',\n})\nexport class BlogListComponent implements OnInit {\n  articles: Record<string, Article> = {};\n\n  pageSize = 10;\n  pageIndex = 0;\n\n  constructor(private router: Router, private articleService: ArticlesService, private route: ActivatedRoute) {}\n\n  ngOnInit() {\n    this.articleService.getList('/assets/articles/list.json').subscribe((articles) => (this.articles = articles));\n    const page = this.route.snapshot.queryParamMap.get('page');\n    if (page) {\n      this.pageIndex = Number(page);\n    }\n  }\n\n  get articleKeys(): string[] {\n    return Object.keys(this.articles).sort((a, b) => (a > b ? -1 : 1));\n  }\n\n  get searchData() {\n    const data: Record<string, string> = {};\n    Object.keys(this.articles).forEach((key) => {\n      const title = `${this.articles[key].title} | ${this.getLabels(this.articles[key])[0].name}`;\n      data[title] = key;\n    });\n    return data;\n  }\n\n  get adsLength(): number {\n    const hasMd = window.screen.width >= 768;\n    return hasMd ? 5 : 1;\n  }\n\n  getLabels(article: Article): Label[] {\n    return article.labels.filter((label) => label.name !== 'article');\n  }\n\n  search: OperatorFunction<string, readonly string[]> = (text$: Observable<string>) => {\n    return text$\n      .pipe(debounceTime(200), distinctUntilChanged())\n      .pipe(\n        map((text) => Object.keys(this.searchData).filter((title) => title.toLowerCase().includes(text.toLowerCase())))\n      );\n  };\n\n  selectArticle(event: NgbTypeaheadSelectItemEvent) {\n    this.router.navigate(['/blog', this.searchData[event.item]]);\n  }\n\n  switchPage(event: PageEvent) {\n    this.pageIndex = event.pageIndex;\n    this.router.navigate([], { queryParams: { page: this.pageIndex } });\n  }\n\n  get displayArticles() {\n    const startIndex = this.pageIndex * this.pageSize;\n    return this.articleKeys.slice(startIndex, startIndex + this.pageSize);\n  }\n}\n","import { BlogDetailComponent } from './blog-detail/blog-detail.component';\nimport { BlogListComponent } from './blog-list/blog-list.component';\nimport { BlogRoutingModule } from './blog-routing.module';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '@app/shared/shared.module';\n\n@NgModule({\n  declarations: [BlogListComponent, BlogDetailComponent],\n  imports: [CommonModule, BlogRoutingModule, SharedModule],\n})\nexport class BlogModule {}\n"],"sourceRoot":"webpack:///","file":"601.48541b96cd9e568b.js"}